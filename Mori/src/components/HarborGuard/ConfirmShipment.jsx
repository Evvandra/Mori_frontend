import React, { useEffect, useState } from "react";
import { useWindowSize } from "react-use";

const ConfirmShipment = () => {
  const { width } = useWindowSize();
  const isMobile = width <= 1024;
  const [airwayBill, setAirwayBill] = useState("");
  const [weightReceived, setWeightReceived] = useState("");
  const [isButtonDisabled, setIsButtonDisabled] = useState(true);

  useEffect(() => {
    // Check if both the shipping method and airway bill are provided
    if (weightReceived !== "" && airwayBill.trim() !== "") {
      setIsButtonDisabled(false); // Enable button if both conditions are met
    } else {
      setIsButtonDisabled(true); // Disable button if not
    }
  }, [weightReceived, airwayBill]); // This effect depends on changes to shippingMethod and airwayBill

  return (
    <>
      {isMobile ? (
        <div className="max-w-[640px] relative bg-slate-50 h-screen overflow-hidden text-left text-base text-zinc-500 font-vietnam ml-auto mr-auto">
          <header className="absolute mt-6 w-full flex flex-col items-center justify-between text-right text-xl">
            <div className="flex flex-row w-full">
              <button className="hover:cursor-pointer" onClick={null}>
                <svg
                  className="ml-5"
                  width="24"
                  height="25"
                  viewBox="0 0 24 25"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M2.81836 12.4297C2.81836 12.0977 2.96484 11.7656 3.19922 11.5312L9.5957 5.14453C9.86914 4.87109 10.1719 4.74414 10.4746 4.74414C11.1777 4.74414 11.666 5.24219 11.666 5.90625C11.666 6.25781 11.5195 6.55078 11.2949 6.77539L9.11719 8.98242L6.53906 11.3359L8.75586 11.209H20.2695C21.0117 11.209 21.5098 11.707 21.5098 12.4297C21.5098 13.1523 21.0117 13.6504 20.2695 13.6504H8.75586L6.53906 13.5234L9.11719 15.877L11.2949 18.084C11.5195 18.2988 11.666 18.5918 11.666 18.9531C11.666 19.6074 11.1777 20.1055 10.4746 20.1055C10.1719 20.1055 9.86914 19.9883 9.61523 19.7344L3.19922 13.3281C2.96484 13.0938 2.81836 12.7617 2.81836 12.4297Z"
                    fill="#828282"
                  />
                </svg>
              </button>
              <div className="flex-1 flex flex-row items-center justify-center gap-[8px] text-base">
                 <svg width="29" height="21" viewBox="0 0 29 21" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2.68928 16.2656V9.87494C3.04382 10.0286 3.41314 10.1497 3.79723 10.2383C4.18722 10.3211 4.58608 10.3624 4.99381 10.3624C5.7738 10.3624 6.50652 10.2118 7.19197 9.91039C7.88333 9.60903 8.49196 9.1954 9.01787 8.66949C9.54968 8.14359 9.96331 7.53791 10.2588 6.85246C10.5601 6.1611 10.7108 5.42543 10.7108 4.64543C10.7108 4.21407 10.6635 3.79453 10.569 3.38681C10.4744 2.97908 10.3385 2.59204 10.1613 2.22568H16.8976C17.6894 2.22568 18.2891 2.4325 18.6969 2.84613C19.1046 3.25385 19.3085 3.85067 19.3085 4.63657V15.9642C19.0248 16.2656 18.8091 16.6172 18.6614 17.019C18.5137 17.4149 18.4398 17.8403 18.4398 18.2953C18.4398 18.4194 18.4487 18.5435 18.4664 18.6676H12.8203C12.8381 18.5494 12.8469 18.4283 12.8469 18.3042C12.8469 17.8078 12.7524 17.344 12.5633 16.9126C12.3801 16.4753 12.1231 16.0942 11.7922 15.7692C11.4672 15.4383 11.086 15.1813 10.6488 14.9981C10.2174 14.809 9.7565 14.7144 9.26605 14.7144C8.76969 14.7144 8.30287 14.809 7.8656 14.9981C7.43424 15.1813 7.05311 15.4383 6.7222 15.7692C6.39721 16.0942 6.14016 16.4753 5.95107 16.9126C5.76789 17.344 5.6763 17.8078 5.6763 18.3042C5.6763 18.4283 5.68517 18.5494 5.70289 18.6676H5.10017C4.57427 18.6676 4.13109 18.576 3.77064 18.3928C3.41609 18.2156 3.14723 17.9496 2.96405 17.5951C2.78087 17.2346 2.68928 16.7915 2.68928 16.2656ZM20.5228 7.11837H22.8805C23.3177 7.11837 23.69 7.17746 23.9973 7.29564C24.3046 7.41382 24.5911 7.61768 24.857 7.90723L27.8707 11.3108C28.1188 11.5886 28.2843 11.8545 28.367 12.1086C28.4557 12.3567 28.5 12.6995 28.5 13.1367V16.2656C28.5 17.0456 28.2991 17.6394 27.8972 18.0471C27.4954 18.4608 26.9045 18.6676 26.1245 18.6676H25.5839C25.6016 18.5435 25.6105 18.4194 25.6105 18.2953C25.6105 17.799 25.513 17.3351 25.318 16.9037C25.1289 16.4665 24.8659 16.0853 24.5291 15.7603C24.1982 15.4294 23.8141 15.1724 23.3768 14.9892C22.9455 14.8001 22.4816 14.7056 21.9853 14.7056C21.7193 14.7056 21.4623 14.741 21.2141 14.8119C20.9659 14.8769 20.7355 14.9685 20.5228 15.0867V7.11837ZM22.8184 12.7733H26.7893C26.7716 12.6729 26.7391 12.5783 26.6918 12.4897C26.6445 12.4011 26.5854 12.3183 26.5145 12.2415L23.8111 9.21017C23.6398 9.01517 23.4773 8.89108 23.3237 8.8379C23.17 8.78472 22.9927 8.75813 22.7918 8.75813H22.0118V11.9667C22.0118 12.2149 22.0828 12.4129 22.2246 12.5606C22.3723 12.7024 22.5702 12.7733 22.8184 12.7733ZM9.26605 20.8569C8.79332 20.8569 8.36196 20.7417 7.97196 20.5112C7.58788 20.2808 7.28061 19.9705 7.05015 19.5805C6.82561 19.1965 6.71334 18.771 6.71334 18.3042C6.71334 17.8315 6.82561 17.4031 7.05015 17.019C7.28061 16.629 7.58788 16.3217 7.97196 16.0972C8.36196 15.8667 8.79332 15.7515 9.26605 15.7515C9.73286 15.7515 10.1583 15.8667 10.5424 16.0972C10.9324 16.3217 11.2426 16.629 11.4731 17.019C11.7035 17.4031 11.8187 17.8315 11.8187 18.3042C11.8187 18.771 11.7035 19.1965 11.4731 19.5805C11.2426 19.9705 10.9353 20.2808 10.5513 20.5112C10.1672 20.7417 9.73877 20.8569 9.26605 20.8569ZM22.0207 20.8569C21.5539 20.8569 21.1255 20.7417 20.7355 20.5112C20.3514 20.2808 20.0441 19.9705 19.8137 19.5805C19.5832 19.1905 19.468 18.7621 19.468 18.2953C19.468 17.8226 19.5832 17.3942 19.8137 17.0101C20.0441 16.6201 20.3514 16.3128 20.7355 16.0883C21.1255 15.8578 21.5539 15.7426 22.0207 15.7426C22.4934 15.7426 22.9218 15.8578 23.3059 16.0883C23.69 16.3128 23.9973 16.6201 24.2277 17.0101C24.4582 17.3942 24.5734 17.8226 24.5734 18.2953C24.5734 18.768 24.4582 19.1965 24.2277 19.5805C24.0032 19.9705 23.6959 20.2808 23.3059 20.5112C22.9218 20.7417 22.4934 20.8569 22.0207 20.8569Z" fill="#828282"/>
                    <path d="M4.96845 9.17331C4.34752 9.17331 3.76378 9.05451 3.21725 8.8169C2.67072 8.58215 2.18857 8.25579 1.7708 7.83782C1.35303 7.42272 1.02539 6.94177 0.787895 6.39498C0.553257 5.84819 0.435939 5.26275 0.435939 4.63866C0.435939 4.01743 0.553257 3.43343 0.787895 2.88663C1.02539 2.33984 1.3516 1.85746 1.7665 1.43949C2.18427 1.02153 2.66643 0.695169 3.21296 0.460421C3.76235 0.22281 4.34752 0.104004 4.96845 0.104004C5.58938 0.104004 6.17311 0.22281 6.71964 0.460421C7.26904 0.695169 7.75119 1.02153 8.1661 1.43949C8.58387 1.85746 8.9115 2.33984 9.149 2.88663C9.3865 3.43343 9.50525 4.01743 9.50525 4.63866C9.50525 5.26275 9.3865 5.84819 9.149 6.39498C8.9115 6.94177 8.58387 7.42272 8.1661 7.83782C7.75119 8.25579 7.27047 8.58215 6.72394 8.8169C6.1774 9.05451 5.59224 9.17331 4.96845 9.17331ZM4.49631 6.79004C4.59074 6.79004 4.67658 6.76857 4.75384 6.72563C4.83396 6.67983 4.90264 6.61541 4.95986 6.53239L6.95571 3.48352C6.99005 3.42913 7.01723 3.37331 7.03726 3.31605C7.06016 3.2588 7.0716 3.20297 7.0716 3.14858C7.0716 3.01689 7.02153 2.9081 6.92138 2.82222C6.82409 2.73634 6.71106 2.6934 6.5823 2.6934C6.41347 2.6934 6.27183 2.785 6.15737 2.96822L4.48773 5.62632L3.7366 4.70737C3.67937 4.6358 3.61928 4.58427 3.55633 4.55278C3.49624 4.52128 3.42614 4.50554 3.34602 4.50554C3.21725 4.50554 3.10566 4.55278 3.01123 4.64725C2.9168 4.73886 2.86959 4.85051 2.86959 4.98219C2.86959 5.04517 2.88103 5.10529 2.90392 5.16255C2.92682 5.21981 2.96258 5.27849 3.01123 5.33861L4.01559 6.54098C4.08427 6.624 4.15723 6.68698 4.23449 6.72993C4.31175 6.77 4.39902 6.79004 4.49631 6.79004Z" fill="#828282"/>
                </svg>


                <div className="relative font-semibold text-lg font-vietnam text-center select-none">
                  Confirm Shipment
                </div>

                <div className="w-7 h-4 invisible"></div>
              </div>
            </div>

            <hr className="relative w-full h-0 border-2 border-[#d9d9d9] mt-5" />
          </header>

          <main className="absolute mt-24 w-full flex flex-col items-start justify-start px-5">
            <form id="shipment-form">
              {/* Shipping ID */}
              <div className="w-full justify-start items-start flex flex-col gap-2.5">
                <div className="text-black text-base font-semibold font-vietnam select-none">
                  Shipping ID
                </div>

                <input
                  placeholder="Type..."
                  className="w-full py-3 px-4 bg-[#efefef] border-none rounded ring-0 ring-inset focus:ring-1 focus:ring-inset focus:ring-gray-400 focus:border-none"
                  value={airwayBill}
                  onChange={(e) => setAirwayBill(e.target.value)}
                />

                <div className="w-full mt-2">
                  <span className="text-zinc-500 text-md font-semibold font-vietnam leading-none">
                    How to check your airway bill?
                    <br />
                  </span>
                  <span className="text-zinc-500 text-md font-normal font-vietnam leading-none">
                    Your air waybill is an 11 digit number, normally located on
                    your carrier's shipping label, but you may also find it in
                    any of their email communications or directly from your
                    online account.
                  </span>
                </div>

                {/* Weight Received */}
                <div className="text-black text-base font-semibold font-vietnam mt-4 select-none">
                  Weight Received
                </div>

                <div className="w-full">
                    {/* Input field */}
                    <input
                        placeholder="Scale..."
                        className="w-full py-3 px-4 bg-[#efefef] border-none rounded ring-0 ring-inset focus:ring-1 focus:ring-inset focus:ring-gray-400 focus:border-none pr-16"
                        value={weightReceived}
                        onChange={(e) => setWeightReceived(e.target.value)}
                    />
                    <div className="relative">
                        {/* SVG icon */}
                        <svg
                            className="absolute top-[-24px] right-2 transform -translate-y-1/2 w-4 h-4 text-black pointer-events-none"
                            viewBox="0 0 15 16"
                            fill="none"
                            xmlns="http://www.w3.org/2000/svg"
                        >
                            <path d="M0.98368 12.7794L2.52045 6.96979C2.65611 6.45685 2.91575 6.06129 3.29936 5.78309C3.68297 5.50054 4.16014 5.35926 4.73087 5.35926H11.1376C11.7083 5.35926 12.1855 5.50054 12.5691 5.78309C12.9527 6.06129 13.2123 6.45685 13.348 6.96979L14.8918 12.7794C15.0836 13.501 15.0204 14.0617 14.7023 14.4617C14.3889 14.8616 13.8579 15.0615 13.1094 15.0615H2.76605C2.01287 15.0615 1.47722 14.8616 1.15911 14.4617C0.845675 14.0617 0.787198 13.501 0.98368 12.7794ZM2.32397 12.8642C2.23508 13.1641 2.24912 13.3923 2.36607 13.5488C2.4877 13.7053 2.68652 13.7835 2.96253 13.7835H12.8989C13.1843 13.7835 13.3831 13.7053 13.4954 13.5488C13.6123 13.3923 13.6287 13.1641 13.5445 12.8642L12.0498 7.37405C11.9141 6.88285 11.5914 6.63725 11.0814 6.63725H4.78701C4.27709 6.63725 3.95664 6.88285 3.82565 7.37405L2.32397 12.8642ZM7.24303 6.31775V4.23125H8.62542V6.31775H7.24303ZM7.93773 4.86372C7.54945 4.86372 7.19391 4.77678 6.87112 4.60291C6.553 4.42468 6.29804 4.18778 6.10624 3.89219C5.91444 3.5966 5.81853 3.26841 5.81853 2.90762C5.81853 2.55117 5.91444 2.22298 6.10624 1.92305C6.29804 1.62311 6.553 1.38403 6.87112 1.20581C7.19391 1.02759 7.54945 0.938477 7.93773 0.938477C8.31666 0.938477 8.66518 1.02759 8.98329 1.20581C9.30609 1.38403 9.56572 1.62311 9.7622 1.92305C9.95869 2.22298 10.0569 2.55117 10.0569 2.90762C10.0569 3.26841 9.95869 3.5966 9.7622 3.89219C9.5704 4.18778 9.3131 4.42468 8.99031 4.60291C8.6722 4.77678 8.32134 4.86372 7.93773 4.86372ZM7.93773 3.79438C8.19971 3.79438 8.42426 3.70745 8.61138 3.53357C8.79851 3.35535 8.89207 3.1467 8.89207 2.90762C8.89207 2.66854 8.79617 2.45989 8.60437 2.28167C8.41724 2.10344 8.19503 2.01433 7.93773 2.01433C7.67575 2.01433 7.44887 2.10344 7.25706 2.28167C7.06994 2.45989 6.97637 2.66854 6.97637 2.90762C6.97637 3.1467 7.06994 3.35535 7.25706 3.53357C7.44887 3.70745 7.67575 3.79438 7.93773 3.79438Z" fill="black"/>
                        </svg>

                    </div>
                </div>


                <button
                  className="w-full mt-3 py-2 bg-[#217045] text-white rounded-md select-none hover:bg-[#9AD1B380]/90 disabled:cursor-not-allowed disabled:bg-[#176e76]/50"
                  type="submit"
                  disabled={isButtonDisabled}
                >
                  Confirm Shipment
                </button>
              </div>
            </form>
          </main>
        </div>
      ) : (
        // Display "Not available for this device" text for larger devices
        <div className="flex justify-center items-center h-screen mt-4 text-gray-600">
          Not available for this device.
        </div>
      )}
    </>
  );
};

export default ConfirmShipment;
